import{r as o,R as l}from"./app-BYa8S_9n.js";import{a as ce,c as p,a3 as ie,o as fe,z as me,G as pe,D as de,H as ge,J as Ce,A as xe,K as he,E as we,ay as Se,P as ae,O as ue,Q as ye}from"./index-DNItgtoq.js";import{u as Ee,B as ve,r as le,g as be}from"./getAllowClear-BjX4QNHW.js";import{h as Re,u as $e}from"./index-CVtKyXfV.js";function M(){return M=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(s[u]=c[u])}return s},M.apply(this,arguments)}const Ne=o.forwardRef((s,i)=>{const{autoComplete:c,onChange:u,onFocus:w,onBlur:j,onPressEnter:D,onKeyDown:H,onKeyUp:U,prefixCls:f="rc-input",disabled:S,htmlSize:K,className:T,maxLength:W,suffix:N,showCount:G,count:V,type:J="text",classes:Q,classNames:F,styles:I,onCompositionStart:_,onCompositionEnd:d,...q}=s,[X,P]=o.useState(!1),z=o.useRef(!1),m=o.useRef(!1),r=o.useRef(null),t=o.useRef(null),y=e=>{r.current&&ie(r.current,e)},[E,g]=ce(s.defaultValue,s.value),A=E==null?"":String(E),[B,Y]=o.useState(null),n=Ee(V,G),C=n.max||W,v=n.strategy(A),Z=!!C&&v>C;o.useImperativeHandle(i,()=>({focus:y,blur:()=>{r.current?.blur()},setSelectionRange:(e,a,$)=>{r.current?.setSelectionRange(e,a,$)},select:()=>{r.current?.select()},input:r.current,nativeElement:t.current?.nativeElement||r.current})),o.useEffect(()=>{m.current&&(m.current=!1),P(e=>e&&S?!1:e)},[S]);const b=(e,a,$)=>{let x=a;if(!z.current&&n.exceedFormatter&&n.max&&n.strategy(a)>n.max)x=n.exceedFormatter(a,{max:n.max}),a!==x&&Y([r.current?.selectionStart||0,r.current?.selectionEnd||0]);else if($.source==="compositionEnd")return;g(x),r.current&&le(r.current,e,u,x)};o.useEffect(()=>{B&&r.current?.setSelectionRange(...B)},[B]);const L=e=>{b(e,e.target.value,{source:"change"})},ee=e=>{z.current=!1,b(e,e.currentTarget.value,{source:"compositionEnd"}),d?.(e)},R=e=>{D&&e.key==="Enter"&&!m.current&&!e.nativeEvent.isComposing&&(m.current=!0,D(e)),H?.(e)},te=e=>{e.key==="Enter"&&(m.current=!1),U?.(e)},k=e=>{P(!0),w?.(e)},se=e=>{m.current&&(m.current=!1),P(!1),j?.(e)},O=e=>{g(""),y(),r.current&&le(r.current,e,u)},ne=Z&&`${f}-out-of-range`,re=()=>{const e=fe(s,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return l.createElement("input",M({autoComplete:c},e,{onChange:L,onFocus:k,onBlur:se,onKeyDown:R,onKeyUp:te,className:p(f,{[`${f}-disabled`]:S},F?.input),style:I?.input,ref:r,size:K,type:J,onCompositionStart:a=>{z.current=!0,_?.(a)},onCompositionEnd:ee}))},oe=()=>{const e=Number(C)>0;if(N||n.show){const a=n.showFormatter?n.showFormatter({value:A,count:v,maxLength:C}):`${v}${e?` / ${C}`:""}`;return l.createElement(l.Fragment,null,n.show&&l.createElement("span",{className:p(`${f}-show-count-suffix`,{[`${f}-show-count-has-suffix`]:!!N},F?.count),style:{...I?.count}},a),N)}return null};return l.createElement(ve,M({},q,{prefixCls:f,className:p(T,ne),handleReset:O,value:A,focused:X,triggerFocus:y,suffix:oe(),disabled:S,classes:Q,classNames:F,styles:I,ref:t}),re())});function Fe(s,i){const c=o.useRef([]),u=()=>{c.current.push(setTimeout(()=>{s.current?.input&&s.current?.input.getAttribute("type")==="password"&&s.current?.input.hasAttribute("value")&&s.current?.input.removeAttribute("value")}))};return o.useEffect(()=>(i&&u(),()=>c.current.forEach(w=>{w&&clearTimeout(w)})),[]),u}function Ie(s){return!!(s.prefix||s.suffix||s.allowClear||s.showCount)}const Oe=o.forwardRef((s,i)=>{const{prefixCls:c,bordered:u=!0,status:w,size:j,disabled:D,onBlur:H,onFocus:U,suffix:f,allowClear:S,addonAfter:K,addonBefore:T,className:W,style:N,styles:G,rootClassName:V,onChange:J,classNames:Q,variant:F,...I}=s,{getPrefixCls:_,direction:d,allowClear:q,autoComplete:X,className:P,style:z,classNames:m,styles:r}=me("input"),t=_("input",c),y=o.useRef(null),E=pe(t),[g,A]=Re(t,V);$e(t,E);const{compactSize:B,compactItemClassnames:Y}=de(t,d),n=ge(h=>j??B??h),C=l.useContext(Ce),v=D??C,Z={...s,size:n,disabled:v},[b,L]=xe([m,Q],[r,G],{props:Z}),{status:ee,hasFeedback:R,feedbackIcon:te}=o.useContext(he),k=ye(ee,w),se=Ie(s)||!!R;o.useRef(se);const O=Fe(y,!0),ne=h=>{O(),H?.(h)},re=h=>{O(),U?.(h)},oe=h=>{O(),J?.(h)},e=(R||f)&&l.createElement(l.Fragment,null,f,R&&te),a=be(S??q),[$,x]=we("input",F,u);return l.createElement(Ne,{ref:Se(i,y),prefixCls:t,autoComplete:X,...I,disabled:v,onBlur:ne,onFocus:re,style:{...L.root,...z,...N},styles:L,suffix:e,allowClear:a,className:p(W,V,A,E,Y,P,b.root),onChange:oe,addonBefore:T&&l.createElement(ue,{form:!0,space:!0},T),addonAfter:K&&l.createElement(ue,{form:!0,space:!0},K),classNames:{...b,input:p({[`${t}-sm`]:n==="small",[`${t}-lg`]:n==="large",[`${t}-rtl`]:d==="rtl"},b.input,g),variant:p({[`${t}-${$}`]:x},ae(t,k)),affixWrapper:p({[`${t}-affix-wrapper-sm`]:n==="small",[`${t}-affix-wrapper-lg`]:n==="large",[`${t}-affix-wrapper-rtl`]:d==="rtl"},g),wrapper:p({[`${t}-group-rtl`]:d==="rtl"},g),groupWrapper:p({[`${t}-group-wrapper-sm`]:n==="small",[`${t}-group-wrapper-lg`]:n==="large",[`${t}-group-wrapper-rtl`]:d==="rtl",[`${t}-group-wrapper-${$}`]:x},ae(`${t}-group-wrapper`,k,R),g)}})});export{Oe as I,Fe as u};
