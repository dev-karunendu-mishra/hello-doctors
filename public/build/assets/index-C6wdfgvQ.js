import{r as e}from"./app-D55t-D9U.js";import{j as re,m as ne,f as se,x as ae,ay as ie,z as ce,H as le,ax as me,bb as pe,G as X,c as M,R as ge,B as de,ae as ue,ar as fe}from"./index-BDREbTHe.js";import{a as Se}from"./index-C7eJ73H3.js";const T=e.createContext({}),he=t=>{const{antCls:o,componentCls:r,iconCls:n,avatarBg:a,avatarColor:i,containerSize:h,containerSizeLG:c,containerSizeSM:E,textFontSize:v,textFontSizeLG:C,textFontSizeSM:k,iconFontSize:G,iconFontSizeLG:x,iconFontSizeSM:p,borderRadius:g,borderRadiusLG:b,borderRadiusSM:P,lineWidth:R,lineType:F}=t,z=(S,d,y,u)=>({width:S,height:S,borderRadius:"50%",fontSize:d,[`&${r}-square`]:{borderRadius:u},[`&${r}-icon`]:{fontSize:y,[`> ${n}`]:{margin:0}}});return{[r]:{...ae(t),position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${se(R)} ${F} transparent`,"&-image":{background:"transparent"},[`${o}-image-img`]:{display:"block"},...z(h,v,G,g),"&-lg":{...z(c,C,x,b)},"&-sm":{...z(E,k,p,P)},"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}}}},ve=t=>{const{componentCls:o,groupBorderColor:r,groupOverlapping:n,groupSpace:a}=t;return{[`${o}-group`]:{display:"inline-flex",[o]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:n}},[`${o}-group-popover`]:{[`${o} + ${o}`]:{marginInlineStart:a}}}},Ce=t=>{const{controlHeight:o,controlHeightLG:r,controlHeightSM:n,fontSize:a,fontSizeLG:i,fontSizeXL:h,fontSizeHeading3:c,marginXS:E,marginXXS:v,colorBorderBg:C}=t;return{containerSize:o,containerSizeLG:r,containerSizeSM:n,textFontSize:a,textFontSizeLG:a,textFontSizeSM:a,iconFontSize:Math.round((i+h)/2),iconFontSizeLG:c,iconFontSizeSM:a,groupSpace:v,groupOverlapping:-E,groupBorderColor:C}},q=re("Avatar",t=>{const{colorTextLightSolid:o,colorTextPlaceholder:r}=t,n=ne(t,{avatarBg:r,avatarColor:o});return[he(n),ve(n)]},Ce),D=e.forwardRef((t,o)=>{const{prefixCls:r,shape:n,size:a,src:i,srcSet:h,icon:c,className:E,rootClassName:v,style:C,alt:k,draggable:G,children:x,crossOrigin:p,gap:g=4,onError:b,...P}=t,[R,F]=e.useState(1),[z,S]=e.useState(!1),[d,y]=e.useState(!0),u=e.useRef(null),$=e.useRef(null),L=ie(o,u),{getPrefixCls:A,className:B,style:I}=ce("avatar"),w=e.useContext(T),H=()=>{if(!$.current||!u.current)return;const s=$.current.offsetWidth,l=u.current.offsetWidth;s!==0&&l!==0&&g*2<l&&F(l-g*2<s?(l-g*2)/s:1)};e.useEffect(()=>{S(!0)},[]),e.useEffect(()=>{y(!0),F(1)},[i]),e.useEffect(H,[g]);const J=()=>{b?.()!==!1&&y(!1)},m=le(s=>a??w?.size??s??"default"),K=Object.keys(typeof m=="object"?m||{}:{}).some(s=>["xs","sm","md","lg","xl","xxl"].includes(s)),O=me(K),Q=e.useMemo(()=>{if(typeof m!="object")return{};const s=pe.find(oe=>O[oe]),l=m[s];return l?{width:l,height:l,fontSize:l&&(c||x)?l/2:18}:{}},[O,m,c,x]),f=A("avatar",r),W=X(f),[U,Y]=q(f,W),Z=M({[`${f}-lg`]:m==="large",[`${f}-sm`]:m==="small"}),j=e.isValidElement(i),_=n||w?.shape||"circle",ee=M(f,Z,B,`${f}-${_}`,{[`${f}-image`]:j||i&&d,[`${f}-icon`]:!!c},Y,W,E,v,U),te=typeof m=="number"?{width:m,height:m,fontSize:c?m/2:18}:{};let N;if(typeof i=="string"&&d)N=e.createElement("img",{src:i,draggable:G,srcSet:h,onError:J,alt:k,crossOrigin:p});else if(j)N=i;else if(c)N=c;else if(z||R!==1){const s=`scale(${R})`,l={msTransform:s,WebkitTransform:s,transform:s};N=e.createElement(ge,{onResize:H},e.createElement("span",{className:`${f}-string`,ref:$,style:l},x))}else N=e.createElement("span",{className:`${f}-string`,style:{opacity:0},ref:$},x);return e.createElement("span",{...P,style:{...te,...Q,...I,...C},className:ee,ref:L},N)}),V=t=>{const{size:o,shape:r}=e.useContext(T),n=e.useMemo(()=>({size:t.size||o,shape:t.shape||r}),[t.size,t.shape,o,r]);return e.createElement(T.Provider,{value:n},t.children)},xe=t=>{const{getPrefixCls:o,direction:r}=e.useContext(de),{prefixCls:n,className:a,rootClassName:i,style:h,maxCount:c,maxStyle:E,size:v,shape:C,maxPopoverPlacement:k,maxPopoverTrigger:G,children:x,max:p}=t,g=o("avatar",n),b=`${g}-group`,P=X(g),[R,F]=q(g,P),z=M(b,{[`${b}-rtl`]:r==="rtl"},F,P,a,i,R),S=ue(x).map((u,$)=>fe(u,{key:`avatar-key-${$}`})),d=p?.count||c,y=S.length;if(d&&d<y){const u=S.slice(0,d),$=S.slice(d,y),L=p?.style||E,A=p?.popover?.trigger||G||"hover",B=p?.popover?.placement||k||"top",I={content:$,...p?.popover,placement:B,trigger:A,rootClassName:M(`${b}-popover`,p?.popover?.rootClassName)};return u.push(e.createElement(Se,{key:"avatar-popover-key",destroyOnHidden:!0,...I},e.createElement(D,{style:L},`+${y-d}`))),e.createElement(V,{shape:C,size:v},e.createElement("div",{className:z,style:h},u))}return e.createElement(V,{shape:C,size:v},e.createElement("div",{className:z,style:h},S))},ze=D;ze.Group=xe;export{ze as A};
