import{u as I,r as p,j as e,H as w,L as k}from"./app-D55t-D9U.js";import{A as E}from"./AdminLayout-CtJ6cftv.js";import{B as m,S as N}from"./index-CDwq9SYS.js";import{R as F}from"./ArrowLeftOutlined-DncDVIOz.js";import{A as x}from"./index-hikZUzQp.js";import{C as R}from"./index-BDREbTHe.js";import{F as s}from"./index-CK3C8kGr.js";import{I as c}from"./index-EJgg6Vgg.js";import{R as d}from"./index-CIQpNBio.js";import{U as A,R as z}from"./index-CWvcFd0A.js";import{T as D}from"./index-CekIDv_W.js";import{S as L}from"./index-CXuu-e1Z.js";import"./index-C01PfRE6.js";import"./index-C6wdfgvQ.js";import"./index-C7eJ73H3.js";import"./UserOutlined-C0znjLsp.js";import"./MedicineBoxOutlined-C8WO2UPk.js";import"./CalendarOutlined-CLybvQfj.js";import"./CheckCircleFilled-CO1ZpaHp.js";import"./CloseCircleFilled-CFl4zLgu.js";import"./ExclamationCircleFilled-t0yh3rj6.js";import"./InfoCircleFilled-DxeoyIrx.js";import"./CSSMotionList-DHZqg3NP.js";import"./useForm-BLm6MIyS.js";import"./row-AR-sT-Xq.js";import"./index-B47JOQyf.js";import"./Input-DDx8swMK.js";import"./getAllowClear-QR2RwVXs.js";import"./EyeOutlined-wKKku8nJ.js";import"./SearchOutlined-Cx57Hq3n.js";import"./TextArea-Ckso50rn.js";import"./useBubbleLock-BN-C7x0E.js";import"./DeleteOutlined-bj8FuX6t.js";import"./CheckOutlined-BkXaz8Sr.js";import"./DownOutlined-TDKV1wlF.js";const{TextArea:B}=c;function je({existingImages:l}){const{data:i,setData:r,post:u,processing:f,errors:a}=I({name:"",icon:"",image_path:"",image_file:null,description:"",is_active:!0,sort_order:0}),[n,j]=p.useState("existing"),[v,g]=p.useState([]),[_,h]=p.useState("");console.log("Existing Images:",l);const S=t=>{t.preventDefault();const o=new FormData;o.append("name",i.name),o.append("icon",i.icon||""),o.append("description",i.description||""),o.append("is_active",i.is_active?"1":"0"),o.append("sort_order",i.sort_order),n==="upload"&&i.image_file?o.append("image_file",i.image_file):n==="existing"&&i.image_path&&o.append("image_path",i.image_path),u("/admin/specialties",{data:o,forceFormData:!0})},b=({fileList:t})=>{g(t),t.length>0?(r("image_file",t[0].originFileObj),r("image_path","")):r("image_file",null)},y=t=>{h(t),r("image_path",t),r("image_file",null)},C={beforeUpload:()=>!1,maxCount:1,listType:"picture",fileList:v,onChange:b,accept:"image/jpeg,image/jpg,image/png,image/gif"};return e.jsxs(E,{children:[e.jsx(w,{title:"Create Specialty"}),e.jsx("div",{className:"mb-4",children:e.jsx(k,{href:"/admin/specialties",children:e.jsx(m,{icon:e.jsx(F,{}),children:"Back to List"})})}),a&&Object.keys(a).length>0&&e.jsx(x,{message:"Please fix the errors below",type:"error",showIcon:!0,className:"mb-6"}),e.jsx(R,{title:"Create New Specialty",children:e.jsxs("form",{onSubmit:S,children:[e.jsx(s.Item,{label:"Specialty Name",validateStatus:a.name?"error":"",help:a.name,required:!0,children:e.jsx(c,{size:"large",placeholder:"e.g., Cardiology, Dermatology",value:i.name,onChange:t=>r("name",t.target.value)})}),e.jsx(s.Item,{label:"Icon/Emoji (Optional)",validateStatus:a.icon?"error":"",help:a.icon||"Enter an emoji or icon",children:e.jsx(c,{size:"large",placeholder:"ðŸ«€ or â¤ï¸",value:i.icon,onChange:t=>r("icon",t.target.value),maxLength:10})}),e.jsxs(s.Item,{label:"Specialty Image",validateStatus:a.image_path||a.image_file?"error":"",help:a.image_path||a.image_file,children:[e.jsxs(d.Group,{value:n,onChange:t=>{j(t.target.value),t.target.value==="existing"?(g([]),r("image_file",null)):(h(""),r("image_path",""))},className:"mb-3",children:[e.jsx(d,{value:"existing",children:"Select Existing Image"}),e.jsx(d,{value:"upload",children:"Upload New Image"})]}),n==="existing"&&e.jsx("div",{className:"mt-3",children:!l||l.length===0?e.jsx(x,{message:"No existing images found",description:"Please upload a new image or check that images exist in public/images/specialties/ folder",type:"info",showIcon:!0}):e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #d9d9d9",borderRadius:"4px",padding:"16px",backgroundColor:"#fafafa"},children:[e.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:["Found ",l.length," images. Click to select:"]}),e.jsx(N,{wrap:!0,size:16,children:l.map(t=>e.jsxs("div",{onClick:()=>y(t.path),style:{cursor:"pointer",border:_===t.path?"3px solid #1890ff":"2px solid #d9d9d9",borderRadius:"8px",padding:"8px",textAlign:"center",width:"70px",transition:"all 0.3s",backgroundColor:"#fff"},className:"hover:shadow-lg",children:[e.jsx("img",{src:`/${t.path}`,alt:t.name,style:{width:"30px",height:"30px",objectFit:"contain",display:"block",margin:"0 auto"},onError:o=>{o.target.onerror=null,o.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="30" height="30"%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3E?%3C/text%3E%3C/svg%3E'}}),e.jsx("div",{style:{fontSize:"11px",marginTop:"4px",wordBreak:"break-all",color:"#666"},children:t.name})]},t.path))})]})}),n==="upload"&&e.jsxs("div",{className:"mt-3",children:[e.jsx(A,{...C,children:e.jsx(m,{icon:e.jsx(z,{}),children:"Select Image File"})}),e.jsx("div",{className:"text-gray-500 text-sm mt-2",children:"Max file size: 2MB. Supported formats: JPG, PNG, GIF"})]})]}),e.jsx(s.Item,{label:"Description (Optional)",validateStatus:a.description?"error":"",help:a.description,children:e.jsx(B,{rows:4,placeholder:"Brief description of the specialty...",value:i.description,onChange:t=>r("description",t.target.value)})}),e.jsx(s.Item,{label:"Sort Order",validateStatus:a.sort_order?"error":"",help:a.sort_order||"Lower numbers appear first",children:e.jsx(D,{size:"large",min:0,value:i.sort_order,onChange:t=>r("sort_order",t),style:{width:"100%"}})}),e.jsx(s.Item,{label:"Active Status",validateStatus:a.is_active?"error":"",help:a.is_active,children:e.jsx(L,{checked:i.is_active,onChange:t=>r("is_active",t),checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(s.Item,{children:e.jsx(m,{type:"primary",htmlType:"submit",loading:f,size:"large",children:"Create Specialty"})})]})})]})}export{je as default};
