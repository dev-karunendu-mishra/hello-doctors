import{r as o,R as l}from"./app-DSGjuhbC.js";import{a as ce,c as p,B as ie,o as fe,D as me,G as pe,J as de,K as ge,L as Ce,N as xe,E as he,M as we,a8 as Se,O as ae}from"./index-CnOAnCoO.js";import{u as ye,B as Ee,r as ue,g as ve}from"./getAllowClear-BWaNOeaR.js";import{o as be,u as Re,j as le,h as $e}from"./index-CKly8-xY.js";function j(){return j=Object.assign?Object.assign.bind():function(s){for(var i=1;i<arguments.length;i++){var c=arguments[i];for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(s[u]=c[u])}return s},j.apply(this,arguments)}const Ne=o.forwardRef((s,i)=>{const{autoComplete:c,onChange:u,onFocus:w,onBlur:k,onPressEnter:D,onKeyDown:U,onKeyUp:H,prefixCls:f="rc-input",disabled:S,htmlSize:K,className:T,maxLength:W,suffix:N,showCount:G,count:V,type:J="text",classes:_,classNames:F,styles:I,onCompositionStart:q,onCompositionEnd:d,...Q}=s,[X,P]=o.useState(!1),B=o.useRef(!1),m=o.useRef(!1),r=o.useRef(null),t=o.useRef(null),y=e=>{r.current&&ie(r.current,e)},[E,g]=ce(s.defaultValue,s.value),z=E==null?"":String(E),[A,Y]=o.useState(null),n=ye(V,G),C=n.max||W,v=n.strategy(z),Z=!!C&&v>C;o.useImperativeHandle(i,()=>({focus:y,blur:()=>{r.current?.blur()},setSelectionRange:(e,a,$)=>{r.current?.setSelectionRange(e,a,$)},select:()=>{r.current?.select()},input:r.current,nativeElement:t.current?.nativeElement||r.current})),o.useEffect(()=>{m.current&&(m.current=!1),P(e=>e&&S?!1:e)},[S]);const b=(e,a,$)=>{let x=a;if(!B.current&&n.exceedFormatter&&n.max&&n.strategy(a)>n.max)x=n.exceedFormatter(a,{max:n.max}),a!==x&&Y([r.current?.selectionStart||0,r.current?.selectionEnd||0]);else if($.source==="compositionEnd")return;g(x),r.current&&ue(r.current,e,u,x)};o.useEffect(()=>{A&&r.current?.setSelectionRange(...A)},[A]);const L=e=>{b(e,e.target.value,{source:"change"})},ee=e=>{B.current=!1,b(e,e.currentTarget.value,{source:"compositionEnd"}),d?.(e)},R=e=>{D&&e.key==="Enter"&&!m.current&&!e.nativeEvent.isComposing&&(m.current=!0,D(e)),U?.(e)},te=e=>{e.key==="Enter"&&(m.current=!1),H?.(e)},M=e=>{P(!0),w?.(e)},se=e=>{m.current&&(m.current=!1),P(!1),k?.(e)},O=e=>{g(""),y(),r.current&&ue(r.current,e,u)},ne=Z&&`${f}-out-of-range`,re=()=>{const e=fe(s,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return l.createElement("input",j({autoComplete:c},e,{onChange:L,onFocus:M,onBlur:se,onKeyDown:R,onKeyUp:te,className:p(f,{[`${f}-disabled`]:S},F?.input),style:I?.input,ref:r,size:K,type:J,onCompositionStart:a=>{B.current=!0,q?.(a)},onCompositionEnd:ee}))},oe=()=>{const e=Number(C)>0;if(N||n.show){const a=n.showFormatter?n.showFormatter({value:z,count:v,maxLength:C}):`${v}${e?` / ${C}`:""}`;return l.createElement(l.Fragment,null,n.show&&l.createElement("span",{className:p(`${f}-show-count-suffix`,{[`${f}-show-count-has-suffix`]:!!N},F?.count),style:{...I?.count}},a),N)}return null};return l.createElement(Ee,j({},Q,{prefixCls:f,className:p(T,ne),handleReset:O,value:z,focused:X,triggerFocus:y,suffix:oe(),disabled:S,classes:_,classNames:F,styles:I,ref:t}),re())});function Fe(s,i){const c=o.useRef([]),u=()=>{c.current.push(setTimeout(()=>{s.current?.input&&s.current?.input.getAttribute("type")==="password"&&s.current?.input.hasAttribute("value")&&s.current?.input.removeAttribute("value")}))};return o.useEffect(()=>(i&&u(),()=>c.current.forEach(w=>{w&&clearTimeout(w)})),[]),u}function Ie(s){return!!(s.prefix||s.suffix||s.allowClear||s.showCount)}const Oe=o.forwardRef((s,i)=>{const{prefixCls:c,bordered:u=!0,status:w,size:k,disabled:D,onBlur:U,onFocus:H,suffix:f,allowClear:S,addonAfter:K,addonBefore:T,className:W,style:N,styles:G,rootClassName:V,onChange:J,classNames:_,variant:F,...I}=s,{getPrefixCls:q,direction:d,allowClear:Q,autoComplete:X,className:P,style:B,classNames:m,styles:r}=me("input"),t=q("input",c),y=o.useRef(null),E=pe(t),[g,z]=be(t,V);Re(t,E);const{compactSize:A,compactItemClassnames:Y}=de(t,d),n=ge(h=>k??A??h),C=l.useContext(Ce),v=D??C,Z={...s,size:n,disabled:v},[b,L]=xe([m,_],[r,G],{props:Z}),{status:ee,hasFeedback:R,feedbackIcon:te}=o.useContext(he),M=$e(ee,w),se=Ie(s)||!!R;o.useRef(se);const O=Fe(y,!0),ne=h=>{O(),U?.(h)},re=h=>{O(),H?.(h)},oe=h=>{O(),J?.(h)},e=(R||f)&&l.createElement(l.Fragment,null,f,R&&te),a=ve(S??Q),[$,x]=we("input",F,u);return l.createElement(Ne,{ref:Se(i,y),prefixCls:t,autoComplete:X,...I,disabled:v,onBlur:ne,onFocus:re,style:{...L.root,...B,...N},styles:L,suffix:e,allowClear:a,className:p(W,V,z,E,Y,P,b.root),onChange:oe,addonBefore:T&&l.createElement(ae,{form:!0,space:!0},T),addonAfter:K&&l.createElement(ae,{form:!0,space:!0},K),classNames:{...b,input:p({[`${t}-sm`]:n==="small",[`${t}-lg`]:n==="large",[`${t}-rtl`]:d==="rtl"},b.input,g),variant:p({[`${t}-${$}`]:x},le(t,M)),affixWrapper:p({[`${t}-affix-wrapper-sm`]:n==="small",[`${t}-affix-wrapper-lg`]:n==="large",[`${t}-affix-wrapper-rtl`]:d==="rtl"},g),wrapper:p({[`${t}-group-rtl`]:d==="rtl"},g),groupWrapper:p({[`${t}-group-wrapper-sm`]:n==="small",[`${t}-group-wrapper-lg`]:n==="large",[`${t}-group-wrapper-rtl`]:d==="rtl",[`${t}-group-wrapper-${$}`]:x},le(`${t}-group-wrapper`,M,R),g)}})});export{Oe as I,Fe as u};
