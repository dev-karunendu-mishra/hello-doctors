import{f as H,r as n,R as C}from"./app-DSGjuhbC.js";import{br as j,bs as M,w as v,$ as V,c as x,a8 as N,S as W,aq as G,u as K,ac as J,aF as Q,ao as U,i as X,bt as Y}from"./index-CnOAnCoO.js";const E="__rc_react_root__";function Z(e,o){const t=o[E]||H.createRoot(o);t.render(e),o[E]=t}async function ee(e){return Promise.resolve().then(()=>{e[E]?.unmount(),delete e[E]})}const te=e=>{const{componentCls:o,colorPrimary:t}=e;return{[o]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${t})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},oe=j("Wave",te),T=`${M}-wave-target`;function y(e){return e&&typeof e=="string"&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"&&e!=="canvastext"}function se(e,o=null){const t=getComputedStyle(e),{borderTopColor:r,borderColor:c,backgroundColor:u}=t;return o&&y(t[o])?t[o]:[r,c,u].find(y)??null}function w(e){return Number.isNaN(e)?0:e}const ne=e=>{const{className:o,target:t,component:r,colorSource:c}=e,u=n.useRef(null),[a,p]=n.useState(null),[d,h]=n.useState([]),[f,s]=n.useState(0),[b,m]=n.useState(0),[$,L]=n.useState(0),[_,k]=n.useState(0),[O,A]=n.useState(!1),R={left:f,top:b,width:$,height:_,borderRadius:d.map(l=>`${l}px`).join(" ")};a&&(R["--wave-color"]=a);function S(){const l=getComputedStyle(t);p(se(t,c));const i=l.position==="static",{borderLeftWidth:g,borderTopWidth:D}=l;s(i?t.offsetLeft:w(-Number.parseFloat(g))),m(i?t.offsetTop:w(-Number.parseFloat(D))),L(t.offsetWidth),k(t.offsetHeight);const{borderTopLeftRadius:q,borderTopRightRadius:I,borderBottomLeftRadius:P,borderBottomRightRadius:z}=l;h([q,I,z,P].map(F=>w(Number.parseFloat(F))))}if(n.useEffect(()=>{if(t){const l=v(()=>{S(),A(!0)});let i;return typeof ResizeObserver<"u"&&(i=new ResizeObserver(S),i.observe(t)),()=>{v.cancel(l),i?.disconnect()}}},[t]),!O)return null;const B=(r==="Checkbox"||r==="Radio")&&t?.classList.contains(T);return n.createElement(V,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(l,i)=>{if(i.deadline||i.propertyName==="opacity"){const g=u.current?.parentElement;ee(g).then(()=>{g?.remove()})}return!1}},({className:l},i)=>n.createElement("div",{ref:N(u,i),className:x(o,l,{"wave-quick":B}),style:R}))},re=(e,o)=>{const{component:t}=o;if(t==="Checkbox"&&!e.querySelector("input")?.checked)return;const r=document.createElement("div");r.style.position="absolute",r.style.left="0px",r.style.top="0px",e?.insertBefore(r,e?.firstChild),Z(n.createElement(ne,{...o,target:e}),r)},ae=(e,o,t,r)=>{const{wave:c}=n.useContext(W),[,u,a]=G(),p=K(f=>{const s=e.current;if(c?.disabled||!s)return;const b=s.querySelector(`.${T}`)||s,{showEffect:m}=c||{};(m||re)(b,{className:o,token:u,component:t,event:f,hashId:a,colorSource:r})}),d=n.useRef(null);return n.useEffect(()=>()=>{v.cancel(d.current)},[]),f=>{v.cancel(d.current),d.current=v(()=>{p(f)})}},ue=e=>{const{children:o,disabled:t,component:r,colorSource:c}=e,{getPrefixCls:u}=n.useContext(W),a=n.useRef(null),p=u("wave"),[,d]=oe(p),h=ae(a,x(p,d),r,c);if(C.useEffect(()=>{const s=a.current;if(!s||s.nodeType!==window.Node.ELEMENT_NODE||t)return;const b=m=>{!X(m.target)||!s.getAttribute||s.getAttribute("disabled")||s.disabled||s.className.includes("disabled")&&!s.className.includes("disabled:")||s.getAttribute("aria-disabled")==="true"||s.className.includes("-leave")||h(m)};return s.addEventListener("click",b,!0),()=>{s.removeEventListener("click",b,!0)}},[t]),!C.isValidElement(o))return o??null;const f=J(o)?N(Q(o),a):a;return U(o,{ref:f})},le=(e,o)=>{const{r:t,g:r,b:c,a:u}=e.toRgb(),a=new Y(e.toRgbString()).onBackground(o).toHsv();return u<=.5?a.v>.5:t*.299+r*.587+c*.114>192};export{T,ue as W,le as i};
