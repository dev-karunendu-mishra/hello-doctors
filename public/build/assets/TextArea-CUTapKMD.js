import{r,R as b}from"./app-tmpI4mLP.js";import{u as ze,B as ye,r as pe,g as Ce}from"./getAllowClear-CxlVo6wy.js";import{a as he,e as ge,R as ve,c as C,w as xe,j as Re,m as $e,z as Ae,J as Ee,K as Ie,A as Te,a3 as He,G as De,D as Ne,H as Ve,E as Fe,P as Me,Q as Pe}from"./index-BqX9Yzb6.js";import{d as Oe,i as Le,h as je}from"./index-CZp73YbJ.js";const _e=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Be=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],le={};let g;function We(e,t=!1){const s=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&le[s])return le[s];const a=window.getComputedStyle(e),d=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),o=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),m=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),u={sizingStyle:Be.map(l=>`${l}:${a.getPropertyValue(l)}`).join(";"),paddingSize:o,borderSize:m,boxSizing:d};return t&&s&&(le[s]=u),u}function Ge(e,t=!1,s=null,a=null){g||(g=document.createElement("textarea"),g.setAttribute("tab-index","-1"),g.setAttribute("aria-hidden","true"),g.setAttribute("name","hiddenTextarea"),document.body.appendChild(g)),e.getAttribute("wrap")?g.setAttribute("wrap",e.getAttribute("wrap")):g.removeAttribute("wrap");const{paddingSize:d,borderSize:o,boxSizing:m,sizingStyle:v}=We(e,t);g.setAttribute("style",`${v};${_e}`),g.value=e.value||e.placeholder||"";let u,l,p,f=g.scrollHeight;if(m==="border-box"?f+=o:m==="content-box"&&(f-=d),s!==null||a!==null){g.value=" ";const R=g.scrollHeight-d;s!==null&&(u=R*s,m==="border-box"&&(u=u+d+o),f=Math.max(u,f)),a!==null&&(l=R*a,m==="border-box"&&(l=l+d+o),p=f>l?"":"hidden",f=Math.min(l,f))}const z={height:f,overflowY:p,resize:"none"};return u&&(z.minHeight=u),l&&(z.maxHeight=l),z}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},de.apply(this,arguments)}const ce=0,ue=1,fe=2,Ye=r.forwardRef((e,t)=>{const{prefixCls:s,defaultValue:a,value:d,autoSize:o,onResize:m,className:v,style:u,disabled:l,onChange:p,onInternalAutoSize:f,...z}=e,[R,I]=he(a,d),$=R??"",G=x=>{I(x.target.value),p?.(x)},w=r.useRef();r.useImperativeHandle(t,()=>({textArea:w.current}));const[T,H]=r.useMemo(()=>o&&typeof o=="object"?[o.minRows,o.maxRows]:[],[o]),D=!!o,[h,A]=r.useState(fe),[O,Y]=r.useState(),L=()=>{A(ce)};ge(()=>{D&&L()},[d,T,H,D]),ge(()=>{if(h===ce)A(ue);else if(h===ue){const x=Ge(w.current,!1,T,H);A(fe),Y(x)}},[h]);const j=r.useRef(),E=()=>{xe.cancel(j.current)},_=x=>{h===fe&&(m?.(x),o&&(E(),j.current=xe(()=>{L()})))};r.useEffect(()=>E,[]);const N={...u,...D?O:null};return(h===ce||h===ue)&&(N.overflowY="hidden",N.overflowX="hidden"),r.createElement(ve,{onResize:_,disabled:!(o||m)},r.createElement("textarea",de({},z,{ref:w,style:N,className:C(s,v,{[`${s}-disabled`]:l}),disabled:l,value:$,onChange:G})))});function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},me.apply(this,arguments)}const Ze=b.forwardRef(({defaultValue:e,value:t,onFocus:s,onBlur:a,onChange:d,allowClear:o,maxLength:m,onCompositionStart:v,onCompositionEnd:u,suffix:l,prefixCls:p="rc-textarea",showCount:f,count:z,className:R,style:I,disabled:$,hidden:G,classNames:w,styles:T,onResize:H,onClear:D,onPressEnter:h,readOnly:A,autoSize:O,onKeyDown:Y,...L},j)=>{const[E,_]=he(e,t),B=E==null?"":String(E),[N,x]=b.useState(!1),V=b.useRef(!1),[U,F]=b.useState(null),i=r.useRef(null),W=r.useRef(null),S=()=>W.current?.textArea,J=()=>{S().focus()};r.useImperativeHandle(j,()=>({resizableTextArea:W.current,focus:J,blur:()=>{S().blur()},nativeElement:i.current?.nativeElement||S()})),r.useEffect(()=>{x(n=>!$&&n)},[$]);const[Z,te]=b.useState(null);b.useEffect(()=>{Z&&S().setSelectionRange(...Z)},[Z]);const c=ze(z,f),M=c.max??m,ae=Number(M)>0,q=c.strategy(B),Q=!!M&&q>M,K=(n,k)=>{let ee=k;!V.current&&c.exceedFormatter&&c.max&&c.strategy(k)>c.max&&(ee=c.exceedFormatter(k,{max:c.max}),k!==ee&&te([S().selectionStart||0,S().selectionEnd||0])),_(ee),pe(n.currentTarget,n,d,ee)},ne=n=>{V.current=!0,v?.(n)},se=n=>{V.current=!1,K(n,n.currentTarget.value),u?.(n)},re=n=>{K(n,n.target.value)},oe=n=>{n.key==="Enter"&&h&&!n.nativeEvent.isComposing&&h(n),Y?.(n)},y=n=>{x(!0),s?.(n)},P=n=>{x(!1),a?.(n)},Se=n=>{_(""),J(),pe(S(),n,d)};let ie=l,X;c.show&&(c.showFormatter?X=c.showFormatter({value:B,count:q,maxLength:M}):X=`${q}${ae?` / ${M}`:""}`,ie=b.createElement(b.Fragment,null,ie,b.createElement("span",{className:C(`${p}-data-count`,w?.count),style:T?.count},X)));const be=n=>{H?.(n),S()?.style.height&&F(!0)},we=!O&&!f&&!o;return b.createElement(ye,{ref:i,value:B,allowClear:o,handleReset:Se,suffix:ie,prefixCls:p,classNames:{...w,affixWrapper:C(w?.affixWrapper,{[`${p}-show-count`]:f,[`${p}-textarea-allow-clear`]:o})},disabled:$,focused:N,className:C(R,Q&&`${p}-out-of-range`),style:{...I,...U&&!we?{height:"auto"}:{}},dataAttrs:{affixWrapper:{"data-count":typeof X=="string"?X:void 0}},hidden:G,readOnly:A,onClear:D},b.createElement(Ye,me({},L,{autoSize:O,maxLength:m,onKeyDown:oe,onChange:re,onFocus:y,onBlur:P,onCompositionStart:ne,onCompositionEnd:se,className:C(w?.textarea),style:{resize:I?.resize,...T?.textarea},disabled:$,prefixCls:p,onResize:be,ref:W,readOnly:A})))}),qe=e=>{const{componentCls:t,paddingLG:s}=e,a=`${t}-textarea`;return{[`textarea${t}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${t}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${t}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[a]:{position:"relative","&-show-count":{[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${t},
        &-affix-wrapper${a}-has-feedback ${t}
      `]:{paddingInlineEnd:s},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-rtl`]:{[`${t}-suffix`]:{[`${t}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},Ke=Re(["Input","TextArea"],e=>{const t=$e(e,Oe(e));return qe(t)},Le,{resetFont:!1}),ke=r.forwardRef((e,t)=>{const{prefixCls:s,bordered:a=!0,size:d,disabled:o,status:m,allowClear:v,classNames:u,rootClassName:l,className:p,style:f,styles:z,variant:R,showCount:I,onMouseDown:$,onResize:G,...w}=e,{getPrefixCls:T,direction:H,allowClear:D,autoComplete:h,className:A,style:O,classNames:Y,styles:L}=Ae("textArea"),j=r.useContext(Ee),E=o??j,{status:_,hasFeedback:B,feedbackIcon:N}=r.useContext(Ie),x=Pe(_,m),[V,U]=Te([Y,u],[L,z],{props:e}),F=r.useRef(null);r.useImperativeHandle(t,()=>({resizableTextArea:F.current?.resizableTextArea,focus:y=>{He(F.current?.resizableTextArea?.textArea,y)},blur:()=>F.current?.blur()}));const i=T("input",s),W=De(i),[S,J]=je(i,l);Ke(i,W);const{compactSize:Z,compactItemClassnames:te}=Ne(i,H),c=Ve(y=>d??Z??y),[M,ae]=Fe("textArea",R,a),q=Ce(v??D),[Q,K]=r.useState(!1),[ne,se]=r.useState(!1),re=y=>{K(!0),$?.(y);const P=()=>{K(!1),document.removeEventListener("mouseup",P)};document.addEventListener("mouseup",P)},oe=y=>{if(G?.(y),Q&&typeof getComputedStyle=="function"){const P=F.current?.nativeElement?.querySelector("textarea");P&&getComputedStyle(P).resize==="both"&&se(!0)}};return r.createElement(Ze,{autoComplete:h,...w,style:{...U.root,...O,...f},styles:U,disabled:E,allowClear:q,className:C(J,W,p,l,te,A,V.root,{[`${i}-textarea-affix-wrapper-resize-dirty`]:ne}),classNames:{...V,textarea:C({[`${i}-sm`]:c==="small",[`${i}-lg`]:c==="large"},S,V.textarea,Q&&`${i}-mouse-active`),variant:C({[`${i}-${M}`]:ae},Me(i,x)),affixWrapper:C(`${i}-textarea-affix-wrapper`,{[`${i}-affix-wrapper-rtl`]:H==="rtl",[`${i}-affix-wrapper-sm`]:c==="small",[`${i}-affix-wrapper-lg`]:c==="large",[`${i}-textarea-show-count`]:I||e.count?.show},S)},prefixCls:i,suffix:B&&r.createElement("span",{className:`${i}-textarea-suffix`},N),showCount:I,ref:F,onResize:oe,onMouseDown:re})});export{ke as T};
