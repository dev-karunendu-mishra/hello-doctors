import{u as I,r as d,j as e,H as E,L as N}from"./app-DMN8c6vm.js";import{A as k}from"./AdminLayout-CYJwaImX.js";import{B as p,S as F}from"./index-C8zb2_mb.js";import{R}from"./ArrowLeftOutlined-DwOg0znl.js";import{A as u}from"./index-DbTeXe7L.js";import{C as A}from"./index-BW0nI5-Z.js";import{F as l}from"./index-CwM4B_JC.js";import{I as g}from"./index-BJbHgQL4.js";import{R as c}from"./index-C8VUUUX2.js";import{U as T,R as z}from"./index-cpN0zpR6.js";import{T as D}from"./index-Dmg_Q-MB.js";import{S as L}from"./index-Dkb64bHg.js";import"./index-Bu-4_bOu.js";import"./index-XI1aNo4t.js";import"./index-2stbQ4d-.js";import"./UserOutlined-CT6efwaX.js";import"./MedicineBoxOutlined-DXXWY55O.js";import"./CalendarOutlined-DYgLrgL6.js";import"./CheckCircleFilled-Uof9tbt-.js";import"./CloseCircleFilled-CU0jELYL.js";import"./ExclamationCircleFilled-DEw8Iq-9.js";import"./InfoCircleFilled-upCt2sjR.js";import"./CSSMotionList-B-ThN6IY.js";import"./useForm-DPj_5UC5.js";import"./row-DVRh59_D.js";import"./index-JZqEhivI.js";import"./Input-0vkbORzU.js";import"./getAllowClear-Cscf5q2u.js";import"./EyeOutlined-CgG6LajU.js";import"./SearchOutlined-Bw3R2GAy.js";import"./TextArea-C7pLIYAL.js";import"./useBubbleLock-DUqfJ9xS.js";import"./DeleteOutlined-DmZsZ2BD.js";import"./CheckOutlined-Bo5eQYpK.js";import"./DownOutlined-CPNtPKBg.js";const{TextArea:P}=g;function ve({specialty:s,existingImages:m}){const{data:a,setData:o,post:f,processing:j,errors:i}=I({name:s.name||"",icon:s.icon||"",image_path:s.image_path||"",image_file:null,description:s.description||"",is_active:s.is_active??!0,sort_order:s.sort_order||0,_method:"PUT"}),[n,v]=d.useState("existing"),[_,h]=d.useState([]),[b,x]=d.useState(s.image_path||""),S=t=>{t.preventDefault();const r=new FormData;r.append("_method","PUT"),r.append("name",a.name),r.append("icon",a.icon||""),r.append("description",a.description||""),r.append("is_active",a.is_active?"1":"0"),r.append("sort_order",a.sort_order),n==="upload"&&a.image_file?r.append("image_file",a.image_file):n==="existing"&&a.image_path&&r.append("image_path",a.image_path),f(`/admin/specialties/${s.id}`,{data:r,forceFormData:!0})},C=({fileList:t})=>{h(t),t.length>0?(o("image_file",t[0].originFileObj),o("image_path","")):o("image_file",null)},w=t=>{x(t),o("image_path",t),o("image_file",null)},y={beforeUpload:()=>!1,maxCount:1,listType:"picture",fileList:_,onChange:C,accept:"image/jpeg,image/jpg,image/png,image/gif"};return e.jsxs(k,{children:[e.jsx(E,{title:`Edit Specialty: ${s.name}`}),e.jsx("div",{className:"mb-4",children:e.jsx(N,{href:"/admin/specialties",children:e.jsx(p,{icon:e.jsx(R,{}),children:"Back to List"})})}),i&&Object.keys(i).length>0&&e.jsx(u,{message:"Please fix the errors below",type:"error",showIcon:!0,className:"mb-6"}),e.jsx(A,{title:`Edit Specialty: ${s.name}`,children:e.jsxs("form",{onSubmit:S,children:[e.jsx(l.Item,{label:"Specialty Name",validateStatus:i.name?"error":"",help:i.name,required:!0,children:e.jsx(g,{size:"large",placeholder:"e.g., Cardiology, Dermatology",value:a.name,onChange:t=>o("name",t.target.value)})}),e.jsx(l.Item,{label:"Icon/Emoji (Optional)",validateStatus:i.icon?"error":"",help:i.icon||"Enter an emoji or icon",children:e.jsx(g,{size:"large",placeholder:"ðŸ«€ or â¤ï¸",value:a.icon,onChange:t=>o("icon",t.target.value),maxLength:10})}),e.jsxs(l.Item,{label:"Specialty Image",validateStatus:i.image_path||i.image_file?"error":"",help:i.image_path||i.image_file,children:[e.jsxs(c.Group,{value:n,onChange:t=>{v(t.target.value),t.target.value==="existing"?(h([]),o("image_file",null)):x("")},className:"mb-3",children:[e.jsx(c,{value:"existing",children:"Select Existing Image"}),e.jsx(c,{value:"upload",children:"Upload New Image"})]}),n==="existing"&&e.jsxs("div",{className:"mt-3",children:[a.image_path&&e.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Current Image:"}),e.jsx("img",{src:`/${a.image_path}`,alt:"Current",style:{width:"30px",height:"30px",objectFit:"contain"},onError:t=>{t.target.onerror=null,t.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="30" height="30"%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3E?%3C/text%3E%3C/svg%3E'}})]}),!m||m.length===0?e.jsx(u,{message:"No existing images found",description:"Please upload a new image or check that images exist in public/images/specialties/ folder",type:"info",showIcon:!0}):e.jsxs("div",{style:{maxHeight:"400px",overflowY:"auto",border:"1px solid #d9d9d9",borderRadius:"4px",padding:"16px",backgroundColor:"#fafafa"},children:[e.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:["Found ",m.length," images. Click to select:"]}),e.jsx(F,{wrap:!0,size:16,children:m.map(t=>e.jsxs("div",{onClick:()=>w(t.path),style:{cursor:"pointer",border:b===t.path?"3px solid #1890ff":"2px solid #d9d9d9",borderRadius:"8px",padding:"8px",textAlign:"center",width:"70px",transition:"all 0.3s",backgroundColor:"#fff"},className:"hover:shadow-lg",children:[e.jsx("img",{src:`/${t.path}`,alt:t.name,style:{width:"30px",height:"30px",objectFit:"contain",display:"block",margin:"0 auto"},onError:r=>{r.target.onerror=null,r.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="30" height="30"%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999"%3E?%3C/text%3E%3C/svg%3E'}}),e.jsx("div",{style:{fontSize:"11px",marginTop:"4px",wordBreak:"break-all",color:"#666"},children:t.name})]},t.path))})]})]}),n==="upload"&&e.jsxs("div",{className:"mt-3",children:[e.jsx(T,{...y,children:e.jsx(p,{icon:e.jsx(z,{}),children:"Select Image File"})}),e.jsx("div",{className:"text-gray-500 text-sm mt-2",children:"Max file size: 2MB. Supported formats: JPG, PNG, GIF"})]})]}),e.jsx(l.Item,{label:"Description (Optional)",validateStatus:i.description?"error":"",help:i.description,children:e.jsx(P,{rows:4,placeholder:"Brief description of the specialty...",value:a.description,onChange:t=>o("description",t.target.value)})}),e.jsx(l.Item,{label:"Sort Order",validateStatus:i.sort_order?"error":"",help:i.sort_order||"Lower numbers appear first",children:e.jsx(D,{size:"large",min:0,value:a.sort_order,onChange:t=>o("sort_order",t),style:{width:"100%"}})}),e.jsx(l.Item,{label:"Active Status",validateStatus:i.is_active?"error":"",help:i.is_active,children:e.jsx(L,{checked:a.is_active,onChange:t=>o("is_active",t),checkedChildren:"Active",unCheckedChildren:"Inactive"})}),e.jsx(l.Item,{children:e.jsx(p,{type:"primary",htmlType:"submit",loading:j,size:"large",children:"Update Specialty"})})]})})]})}export{ve as default};
